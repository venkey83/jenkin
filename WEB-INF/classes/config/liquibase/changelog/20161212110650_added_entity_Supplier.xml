<?xml version="1.0" encoding="utf-8"?>
<databaseChangeLog
    xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.4.xsd">

    <property name="now" value="now()" dbms="mysql,h2"/>
    <property name="now" value="current_timestamp" dbms="postgresql"/>
    <property name="now" value="sysdate" dbms="oracle"/>

    <property name="autoIncrement" value="true" dbms="mysql,h2,postgresql,oracle"/>

    <property name="floatType" value="float4" dbms="postgresql, h2"/>
    <property name="floatType" value="float" dbms="mysql, oracle"/>

    <!--
        Added the entity Supplier.
    -->
    <changeSet id="20161212110650-1" author="jhipster">
        <createTable tableName="supplier">
            <column name="id" type="bigint" autoIncrement="${autoIncrement}">
                <constraints primaryKey="true" nullable="false"/>
            </column>
            <column name="company_name" type="varchar(255)">
                <constraints nullable="false" />
            </column>

            <column name="company_address" type="varchar(255)">
                <constraints nullable="false" />
            </column>

            <column name="supplier_type" type="varchar(255)">
                <constraints nullable="false" />
            </column>

            <column name="phone" type="varchar(255)">
                <constraints nullable="false" />
            </column>

            <column name="mobile" type="varchar(255)">
                <constraints nullable="false" />
            </column>

            <column name="contact_person_name" type="varchar(255)">
                <constraints nullable="true" />
            </column>

            <column name="contact_person_designation" type="varchar(255)">
                <constraints nullable="true" />
            </column>

            <column name="type_of_business" type="varchar(255)">
                <constraints nullable="true" />
            </column>

            <column name="tax" type="varchar(255)">
                <constraints nullable="true" />
            </column>

            <column name="gst" type="varchar(255)">
                <constraints nullable="true" />
            </column>

            <column name="acra_number" type="varchar(255)">
                <constraints nullable="true" />
            </column>

            <column name="delivery_terms" type="varchar(255)">
                <constraints nullable="true" />
            </column>

            <column name="payment_terms" type="varchar(255)">
                <constraints nullable="true" />
            </column>

            <column name="payment_due_days" type="varchar(255)">
                <constraints nullable="true" />
            </column>

            <column name="payment_discount_days" type="varchar(255)">
                <constraints nullable="true" />
            </column>

            <column name="payment_discount_percent" type="varchar(255)">
                <constraints nullable="true" />
            </column>

            <column name="delivery_conditions" type="varchar(255)">
                <constraints nullable="true" />
            </column>

            <column name="delivery_charge" type="varchar(255)">
                <constraints nullable="true" />
            </column>

            <column name="company_logo" type="varchar(255)">
                <constraints nullable="true" />
            </column>

            <column name="account_name" type="varchar(255)">
                <constraints nullable="true" />
            </column>

            <column name="account_number" type="varchar(255)">
                <constraints nullable="true" />
            </column>

            <column name="bank_name" type="varchar(255)">
                <constraints nullable="true" />
            </column>

            <column name="created_date" type="timestamp">
                <constraints nullable="true" />
            </column>

            <column name="modified_date" type="timestamp">
                <constraints nullable="true" />
            </column>

            <column name="deleted" type="bit">
                <constraints nullable="false" />
            </column>

            <column name="supplier_code" type="varchar(255)">
                <constraints nullable="false" />
            </column>

            <column name="no_delivery_on_holidays" type="bit">
                <constraints nullable="false" />
            </column>

            <column name="no_delivery_on_sunday" type="bit">
                <constraints nullable="false" />
            </column>

            <column name="order_time_for_friday" type="varchar(255)">
                <constraints nullable="true" />
            </column>

            <column name="order_time_for_saturday" type="varchar(255)">
                <constraints nullable="true" />
            </column>

            <column name="minimum_order_for_free_delivery" type="varchar(255)">
                <constraints nullable="true" />
            </column>

            <column name="below_minimum_purchase_condition" type="varchar(255)">
                <constraints nullable="true" />
            </column>

            <column name="order_time_for_today" type="varchar(255)">
                <constraints nullable="true" />
            </column>

            <column name="no_delivery_on_saturday" type="bit">
                <constraints nullable="false" />
            </column>

            <!-- jhipster-needle-liquibase-add-column - Jhipster will add columns here, do not remove-->
        </createTable>
        <dropDefaultValue tableName="supplier" columnName="created_date" columnDataType="datetime"/>
        <dropDefaultValue tableName="supplier" columnName="modified_date" columnDataType="datetime"/>

    </changeSet>
    <changeSet author="jhipster" id="20161212110650-2">
        <dropColumn
            columnName="no_delivery_on_saturday"
            tableName="supplier"/>
        <dropColumn
            columnName="no_delivery_on_sunday"
            tableName="supplier"/>
        <dropColumn
            columnName="no_delivery_on_holidays"
            tableName="supplier"/>
    </changeSet>

    <changeSet id="20161212110650-3" author="jhipster">
        <addColumn
            tableName="supplier">
            <column name="no_delivery_on_saturday" type="bit"/>
        </addColumn>
        <addColumn
            tableName="supplier">
            <column name="no_delivery_on_holidays" type="bit"/>
        </addColumn>
        <addColumn
            tableName="supplier">
            <column name="no_delivery_on_sunday" type="bit"/>
        </addColumn>
    </changeSet>
    <changeSet author="jhipster" id="20161212110650-4">
        <modifyDataType
                        columnName="gst"
                        newDataType="bigint"
                        tableName="supplier"/>
    </changeSet>
    <changeSet author="jhipster" id="20161212110650-5">
        <modifyDataType
            columnName="payment_discount_percent"
            newDataType="bigint"
            tableName="supplier"/>
    </changeSet>
    <changeSet author="jhipster" id="20161212110650-6">
        <addColumn
            tableName="supplier">
            <column name="limit_number_of_buyers" type="integer"/>
        </addColumn>
    </changeSet>
    <changeSet author="jhipster" id="20161212110650-7">
        <renameColumn
                      columnDataType="int"
                      newColumnName="buyers_limit"
                      oldColumnName="limit_number_of_buyers"
                      tableName="supplier"/>
    </changeSet>
    <changeSet author="jhipster" id="20161212110650-8">
        <addColumn
            tableName="supplier">
            <column name="visibility_type" type="varchar(255)"/>
        </addColumn>
        <addNotNullConstraint
                              columnDataType="varchar(255)"
                              columnName="visibility_type"
                              defaultNullValue="ALLOCATED"
                              tableName="supplier"/>
    </changeSet>
    <changeSet author="jhipster" id="20161212110650-9">
        <addUniqueConstraint
            columnNames="company_name"
            tableName="supplier"/>
    </changeSet>
    <changeSet author="jhipster" id="20161212110650-10">
        <modifyDataType
            columnName="payment_due_days"
            newDataType="integer"
            tableName="supplier"/>
        <modifyDataType
            columnName="payment_discount_days"
            newDataType="integer"
            tableName="supplier"/>
        <modifyDataType
            columnName="delivery_charge"
            newDataType="bigint"
            tableName="supplier"/>
        <modifyDataType
            columnName="minimum_order_for_free_delivery"
            newDataType="bigint"
            tableName="supplier"/>
    </changeSet>
    <changeSet author="jhipster" id="20161212110650-11">
    <addColumn
        tableName="supplier">
        <column name="no_delivery_on_monday" type="bit"/>
    </addColumn>
    </changeSet>
    <changeSet author="jhipster" id="20161212110650-12">
        <addColumn
            tableName="supplier">
            <column name="created_by_id" type="bigint"/>
        </addColumn>
    </changeSet>
    <changeSet author="jhipster" id="20161212110650-13">
        <renameColumn columnDataType="bigint"
                      newColumnName="created_user_id"
                      oldColumnName="created_by_id"
                      tableName="supplier"/>
    </changeSet>
    <changeSet author="jhipster" id="20161212110650-14">
        <renameColumn columnDataType="varchar(255)"
                      newColumnName="company_registration_number"
                      oldColumnName="acra_number"
                      tableName="supplier"/>
    </changeSet>
    <changeSet author="jhipster" id="20161212110650-15">
        <addColumn
            tableName="supplier">
            <column name="gst_reg_no" type="varchar(255)"/>
        </addColumn>
    </changeSet>
    <changeSet author="jhipster" id="20161212110650-17">
        <addColumn
            tableName="supplier">
            <column name="buyer_id" type="bigint"/>
        </addColumn>
    </changeSet>
    <changeSet author="jhipster" id="20161212110650-18">
    <dropUniqueConstraint
                          constraintName="company_name"
                          tableName="supplier"
                          uniqueColumns="company_name"/>
    </changeSet>
    <changeSet id="20161212110650-19" author="jhipster">
        <addColumn
            tableName="supplier">
            <column name="no_same_day_delivery" type="bit" defaultValueComputed="false"/>
        </addColumn>
    </changeSet>
    <changeSet id="20161212110650-20" author="jhipster">
        <addColumn
            tableName="supplier">
            <column name="kyc_report" type="varchar(255)"/>
        </addColumn>
    </changeSet>
    <changeSet id="20161212110650-21" author="jhipster">
        <addColumn
            tableName="supplier">
            <column name="kyc_status" type="varchar(25)"/>
        </addColumn>
    </changeSet>
    <changeSet id="20161212110650-22" author="jhipster">
        <addColumn
            tableName="supplier">
            <column name="kyc_timestamp" type="timestamp"/>
        </addColumn>
    </changeSet>
    <changeSet id="20180611095400-23" author="jhipster">
        <addColumn tableName="supplier">
            <column name="principle_director" type="varchar(25)"/>
        </addColumn>
    </changeSet>
    <changeSet id="20180611095400-24" author="jhipster">
        <addColumn tableName="supplier">
            <column name="principle_finance_officer" type="varchar(25)"/>
        </addColumn>
    </changeSet>
    <changeSet id="20180726101800-25" author="jhipster">
    <dropColumn tableName="supplier">
        <column name="kyc_status" type="varchar(25)"/>
    </dropColumn>
    </changeSet>
    <changeSet id="20180726101800-26" author="jhipster">
        <addColumn tableName="supplier">
            <column name="kyc_status" type="varchar(25)" defaultValue="NA"></column>
        </addColumn>
    </changeSet>
    <changeSet id="20180726101800-27" author="jhipster">
        <addColumn tableName="supplier">
            <column beforeColumn="contact_person_designation" afterColumn="contact_person_name" name="contact_email" type="varchar(255)"/>
        </addColumn>
    </changeSet>
    <changeSet id="20180726101800-28" author="jhipster">
        <addColumn tableName="supplier">
            <column beforeColumn="phone" afterColumn="supplier_type" name="supplier_email" type="varchar(255)"/>
        </addColumn>
    </changeSet>
    <changeSet id="20180726101800-29" author="jhipster">
        <addColumn tableName="supplier">
            <column beforeColumn="phone" afterColumn="supplier_email" name="supplier_phone" type="varchar(255)"/>
        </addColumn>
    </changeSet>
    <changeSet author="jhipster" id="20181009160047-30">
        <addColumn tableName="supplier">
            <column name="demo_account" type="bit" defaultValueComputed="false"/>
        </addColumn>
    </changeSet>
    <changeSet id="20181030163400-31" author="jhipster">
        <addColumn tableName="supplier">
            <column name="ezypayment_only" type="bit" defaultValueComputed="false"></column>
        </addColumn>
    </changeSet>
    <changeSet id="20190104101900-32" author="jhipster">
        <addColumn tableName="supplier">
            <column name="lead_time" type="int" defaultValue="1">
                <constraints nullable="false"/>
            </column>
        </addColumn>
    </changeSet>
    <changeSet id="20190104101900-33" author="jhipster">
        <addColumn tableName="supplier">
            <column name="company_code" type="varchar(255)">
                <constraints nullable="true"/>
            </column>
        </addColumn>
    </changeSet>

    <changeSet author="jhipster" id="20191122114208-34">
        <dropNotNullConstraint columnDataType="varchar(255)"
                               columnName="mobile"
                               tableName="supplier"/>
    </changeSet>

    <changeSet author="jhipster" id="20191122114208-35">
        <dropNotNullConstraint columnDataType="varchar(255)"
                               columnName="phone"
                               tableName="supplier"/>
    </changeSet>
    <changeSet author="jhipster" id="20200204134300-6">
        <modifyDataType
            columnName="gst"
            newDataType="double"
            tableName="supplier"/>
    </changeSet>
</databaseChangeLog>
